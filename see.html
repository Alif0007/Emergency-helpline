<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Copy text from a card</title>
  <style>
    .cards { display: grid; gap: 1rem; max-width: 700px; margin: 2rem auto; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 1rem; }
    .row { display: flex; align-items: center; gap: .5rem; justify-content: space-between; }
    .copy-btn[disabled] { opacity: .6; cursor: not-allowed; }
  </style>
</head>
<body>
  <div class="cards">
    <!-- Card 1 -->
    <div class="card">
      <h3>Product A</h3>
      <!-- Only THIS text will be copied -->
      <p class="copy-text">SKU: ABC-123</p>
      <div class="row">
        <span>$19.99</span>
        <button class="copy-btn" type="button" aria-live="polite">Copy SKU</button>
      </div>
    </div>

    <!-- Card 2 -->
    <div class="card">
      <h3>Order</h3>
      <p class="copy-text">Order ID: #784512</p>
      <div class="row">
        <span>Placed: 2025-08-29</span>
        <button class="copy-btn" type="button" aria-live="polite">Copy Order ID</button>
      </div>
    </div>
  </div>

  <script>
    // Reusable helper with a fallback for older browsers or non-HTTPS pages
    async function copyToClipboard(text) {
      if (navigator.clipboard && window.isSecureContext) {
        // Best method: requires HTTPS (or localhost)
        return navigator.clipboard.writeText(text);
      } else {
        // Fallback: temporary hidden <textarea> + execCommand
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        ta.setAttribute('readonly', '');
        document.body.appendChild(ta);
        ta.select();
        try {
          document.execCommand('copy');
        } finally {
          document.body.removeChild(ta);
        }
      }
    }

    async function copyFromCard(buttonEl) {
      // Find the nearest card and the specific element you want to copy
      const card = buttonEl.closest('.card');
      const sourceEl = card && card.querySelector('.copy-text');
      if (!sourceEl) return;

      // Use visible text (trimmed). You could also use sourceEl.dataset.copy if you prefer a hidden value.
      const text = sourceEl.innerText.trim();

      try {
        await copyToClipboard(text);
        // Lightweight feedback
        const original = buttonEl.textContent;
        buttonEl.textContent = 'Copied!';
        buttonEl.disabled = true;
        setTimeout(() => {
          buttonEl.textContent = original;
          buttonEl.disabled = false;
        }, 1200);
      } catch (err) {
        console.error('Copy failed:', err);
        alert('Sorryâ€”copying failed. Try manually selecting the text.');
      }
    }

    // Event delegation: works for any number of cards
    document.addEventListener('click', (e) => {
      if (e.target.matches('.copy-btn')) {
        copyFromCard(e.target);
      }
    });
  </script>
</body>
</html>
